---
interface Props {
  title: string;
  excerpt: string;
  slug: string;
  publishDate: Date;
  category: string;
  tags?: string[];
  author?: string;
  ogImage?: string;
}

const { title, excerpt, slug, publishDate, category, tags = [], author, ogImage } = Astro.props;

const formattedDate = new Intl.DateTimeFormat('en-GB', { day: 'numeric', month: 'short', year: 'numeric' }).format(new Date(publishDate));
---

<a href={`/insights/${slug}`} class="group block">
  <article class="glass-card-hover h-full flex flex-col overflow-hidden">
    {ogImage && (
      <div class="aspect-[1200/630] overflow-hidden">
        <img
          src={ogImage}
          alt=""
          width="1200"
          height="630"
          class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-[1.02]"
          loading="lazy"
        />
      </div>
    )}
    <div class="p-6 flex flex-col flex-1">
      <div class="flex items-center gap-2 mb-4">
        <span class="px-2 py-0.5 rounded bg-glow-steel/20 text-glow-blue text-xs font-medium uppercase tracking-wider">{category}</span>
        <span class="text-xs text-content-muted">{formattedDate}</span>
      </div>
      <h3 class="text-heading-xs font-semibold mb-3 group-hover:text-content transition-colors">{title}</h3>
      <p class="text-body-sm text-content-secondary flex-1 mb-4">{excerpt}</p>
      <div class="flex items-center justify-between">
        {tags.length > 0 && (
          <div class="flex gap-1.5">
            {tags.slice(0, 2).map((tag) => (
              <span class="px-2 py-0.5 rounded bg-tint/5 text-xs text-content-muted">{tag}</span>
            ))}
          </div>
        )}
        <span class="text-glow-blue text-sm font-medium group-hover:gap-2 inline-flex items-center gap-1 transition-all">
          Read <span class="text-xs">â†’</span>
        </span>
      </div>
    </div>
  </article>
</a>
